<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Make a Event</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');
:root {
  --dark-bg:#0a0b0f;
  --dark-panel:#14161c;
  --dark-text:#e0e0e0;
  --light-bg:#f8f8f8;
  --light-panel:#fff;
  --light-text:#111;
  --accent:#00ffe0;
}
body {
  font-family: 'Orbitron', sans-serif;
  background: var(--dark-bg);
  color: var(--dark-text);
  margin:0; padding:0;
  transition:background .3s,color .3s;
}
[data-theme='light']{
  background: var(--light-bg);
  color: var(--light-text);
}
header{
  display:flex;justify-content:space-between;align-items:center;
  padding:12px 24px;background:var(--dark-panel);
}
[data-theme='light'] header{background:var(--light-panel);}
h1{font-size:1.4em;margin:0;color:var(--accent);}
button{
  background:var(--accent);border:none;padding:8px 14px;
  border-radius:8px;cursor:pointer;font-family:'Orbitron';
  transition:.2s;
}
button:hover{opacity:.8;}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
  gap:16px;
  padding:24px;
}
.card{
  background:var(--dark-panel);
  padding:16px;border-radius:12px;
  display:flex;flex-direction:column;
  align-items:center;text-align:center;
  transition:.3s;
}
[data-theme='light'] .card{background:var(--light-panel);}
.card img{width:80px;height:80px;object-fit:cover;border-radius:8px;}
.card h3{margin:10px 0 6px;}
.card p{font-size:.9em;opacity:.8;}
.money{margin-left:12px;font-weight:700;}
#shopBtn{margin-left:8px;}
.modal{
  position:fixed;top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,0.6);display:none;
  justify-content:center;align-items:center;
}
.modal-content{
  background:var(--dark-panel);padding:20px;border-radius:10px;
  text-align:center;max-width:400px;width:90%;
}
[data-theme='light'] .modal-content{background:var(--light-panel);}
#tutorial{padding:20px;text-align:center;}
.rare-common{border:2px solid #00ff00;}
.rare-rare{border:2px solid #007bff;}
.rare-epic{border:2px solid #9b30ff;}
.rare-legendary{border:2px solid #ffd700;}
.rare-mythic{border:2px solid #ff0000;}
.rare-rich{border:2px solid #ff66ff;}
.rare-pro{border:2px solid #444;}
.rare-dev{
  border:none;
  background:linear-gradient(135deg,#ff0000,#ffcc00);
  color:#fff;
}
input, textarea {
  font-family:'Orbitron';
  border-radius:6px;
  border:1px solid #555;
  padding:6px 10px;
  background:transparent;
  color:inherit;
}
input[type="file"]{border:none;}
</style>
</head>
<body>
<header>
  <h1>Make a Event</h1>
  <div>
    <button id="themeBtn">‚òÄÔ∏è/üåô</button>
    <span class="money">üí∞ <span id="moneyDisplay">0</span> ‚Ç¨</span>
    <button id="shopBtn">Shop</button>
  </div>
</header>

<section id="tutorial">
  <h2>Bienvenue dans Make a Event</h2>
  <p>Cr√©e ton premier √©v√©nement pour gagner de l‚Äôargent ! Upload un logo, choisis un prix, et attire des visiteurs !</p>
</section>

<div class="grid" id="grid"></div>

<!-- Modal cr√©ation d'√©v√©nement -->
<div class="modal" id="modal">
  <div class="modal-content">
    <h2>Cr√©er un √©v√©nement</h2>
    <input type="text" id="eventName" placeholder="Nom de l'√©v√©nement"><br><br>
    <textarea id="eventDesc" placeholder="Description"></textarea><br><br>
    <input type="number" id="eventPrice" placeholder="Prix d'entr√©e (‚Ç¨)"><br><br>
    <input type="file" id="eventLogo" accept="image/*"><br><br>
    <button id="createBtn">Cr√©er</button>
    <button id="closeBtn">Fermer</button>
  </div>
</div>

<!-- Modal shop -->
<div class="modal" id="shopModal">
  <div class="modal-content">
    <h2>Shop d'√©v√©nements</h2>
    <div id="shopItems"></div>
    <button id="shopClose">Fermer</button>
  </div>
</div>

<script>
// === Donn√©es de base ===
let money = parseInt(localStorage.getItem('money')||'1000');
let events = JSON.parse(localStorage.getItem('events')||'[]');
let theme = localStorage.getItem('theme')||'dark';
document.body.dataset.theme = theme;

// === √âl√©ments ===
const el = {
  grid: document.getElementById('grid'),
  modal: document.getElementById('modal'),
  shopModal: document.getElementById('shopModal'),
  createBtn: document.getElementById('createBtn'),
  closeBtn: document.getElementById('closeBtn'),
  shopBtn: document.getElementById('shopBtn'),
  shopClose: document.getElementById('shopClose'),
  eventName: document.getElementById('eventName'),
  eventDesc: document.getElementById('eventDesc'),
  eventPrice: document.getElementById('eventPrice'),
  eventLogo: document.getElementById('eventLogo'),
  themeBtn: document.getElementById('themeBtn'),
  moneyDisplay: document.getElementById('moneyDisplay')
};

// === Fonctions ===
function save(){
  localStorage.setItem('money',money);
  localStorage.setItem('events',JSON.stringify(events));
  el.moneyDisplay.textContent=money;
}
function openModal(){el.modal.style.display='flex';}
function closeModal(){el.modal.style.display='none';}
function render(){
  el.grid.innerHTML='';
  for(const e of events){
    const div=document.createElement('div');
    div.className='card';
    div.innerHTML=`
      <img src="${e.logo}" alt="">
      <h3>${e.name}</h3>
      <p>${e.desc}</p>
      <small>${e.price} ‚Ç¨</small>
      <button class="launch">Lancer</button>
      <button class="stop">Arr√™ter</button>
    `;

    // Appliquer raret√©
    if(e.rarity) div.classList.add('rare-'+e.rarity);

    el.grid.appendChild(div);

    div.querySelector('.launch').onclick=()=>{
      const cost=e.price;
      if(money<cost){alert("Pas assez d'argent");return;}
      const gain = Math.max(10, Math.floor(200 - e.price/2 + Math.random()*100));
      money -= cost;
      money += gain;
      save();
      alert(`√âv√©nement lanc√© ! Tu gagnes ${gain} ‚Ç¨`);
    };

    div.querySelector('.stop').onclick=()=>{
      money += Math.floor(e.price/2);
      save();
      alert("√âv√©nement arr√™t√©, moiti√© du prix r√©cup√©r√©.");
    };
  }
}
function rarityFromName(name){
  const lower=name.toLowerCase();
  if(lower.includes('dev')) return 'dev';
  const rarities=['common','rare','epic','legendary','mythic','rich','pro'];
  return rarities[Math.floor(Math.random()*rarities.length)];
}

// === √âv√©nements ===
el.createBtn.onclick=()=>{
  const name=el.eventName.value.trim();
  const desc=el.eventDesc.value.trim();
  const price=parseInt(el.eventPrice.value)||0;
  if(!name||!desc||!el.eventLogo.files[0]) return alert('Remplis tout.');
  const reader=new FileReader();
  reader.onload=()=>{
    const rarity = rarityFromName(name);
    events.push({name,desc,price,logo:reader.result,rarity});
    save();render();closeModal();
  };
  reader.readAsDataURL(el.eventLogo.files[0]);
};
el.closeBtn.onclick=closeModal;
el.shopBtn.onclick=()=>{el.shopModal.style.display='flex';};
el.shopClose.onclick=()=>{el.shopModal.style.display='none';};
el.themeBtn.onclick=()=>{
  theme = theme==='dark'?'light':'dark';
  document.body.dataset.theme=theme;
  localStorage.setItem('theme',theme);
};

save();render();
</script>
</body>
</html>
