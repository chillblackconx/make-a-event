<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Make a Event</title>
<style>
  * { box-sizing: border-box; }
  body {
    margin: 0; display: flex; height: 100vh;
    background: radial-gradient(circle at top, #1a1a1a, #0d0d0d);
    color: #f0f0f0; font-family: 'Poppins', sans-serif;
  }
  .left {
    flex: 2; display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    padding: 20px; text-align: center;
  }
  .right {
    flex: 1; background: rgba(40,40,40,0.9);
    padding: 15px; display: flex; flex-direction: column;
    gap: 10px; border-left: 1px solid #333;
  }
  input, select, textarea {
    width: 100%; background: #222; color: #fff;
    border: 1px solid #555; border-radius: 6px;
    padding: 6px; font-size: 14px;
  }
  input[type="file"] { padding: 3px; }
  img {
    width: 180px; height: 180px; object-fit: cover;
    border-radius: 10px; border: 2px solid #444;
  }
  .result {
    background: #222; padding: 10px 15px;
    border-radius: 10px; margin-top: 10px;
  }
  button {
    background: #0077ff; border: none; border-radius: 6px;
    color: white; font-weight: 600; padding: 8px;
    cursor: pointer; transition: 0.2s;
  }
  button:hover { background: #005fe0; }
  /* Tutoriel */
  #tutorial {
    position: fixed; inset: 0;
    background: rgba(0,0,0,0.85); display: flex;
    align-items: center; justify-content: center;
    text-align: center; flex-direction: column;
    z-index: 10; padding: 20px;
  }
  #tutorial button { margin-top: 20px; }
</style>
</head>
<body>

<div id="tutorial">
  <h2>Bienvenue dans <span style="color:#00aaff;">Make a Event</span> ðŸŽ‰</h2>
  <p>CrÃ©e ton Ã©vÃ©nement, choisis le prix du ticket et ton budget marketing,<br>
  puis vois combien de personnes viennent et combien tu gagnes !</p>
  <p>ðŸ’¡ Plus le ticket est cher â†’ moins de monde.  
     Plus tu fais de marketing â†’ plus tu attires de monde.</p>
  <button onclick="startGame()">Commencer</button>
</div>

<div class="left">
  <h2 id="eventName">Nom de l'Ã©vÃ©nement</h2>
  <img id="eventLogo" src="" alt="Logo">
  <p id="eventDescription">Description de ton Ã©vÃ©nement</p>
  <div class="result">
    <p>ðŸ‘¥ Participants estimÃ©s : <b id="participants">0</b></p>
    <p>ðŸ’° Profit estimÃ© : <b id="profit">0 â‚¬</b></p>
  </div>
</div>

<div class="right">
  <label>Nom :
    <input type="text" id="nameInput" placeholder="Ex : Summer Fest">
  </label>
  <label>Logo :
    <input type="file" id="logoInput" accept="image/*">
  </label>
  <label>Description :
    <textarea id="descInput" rows="3" placeholder="DÃ©cris ton Ã©vÃ©nement"></textarea>
  </label>
  <label>Type :
    <select id="typeSelect">
      <option value="concert">Concert</option>
      <option value="conference">ConfÃ©rence</option>
      <option value="exposition">Exposition</option>
      <option value="fete">FÃªte</option>
    </select>
  </label>
  <label>Prix du ticket (â‚¬) :
    <input type="number" id="priceInput" value="10" min="1">
  </label>
  <label>Budget marketing (â‚¬) :
    <input type="number" id="marketingInput" value="50" min="0">
  </label>
</div>

<script>
const eventName = document.getElementById('eventName');
const eventLogo = document.getElementById('eventLogo');
const eventDescription = document.getElementById('eventDescription');
const participantsDisplay = document.getElementById('participants');
const profitDisplay = document.getElementById('profit');

const nameInput = document.getElementById('nameInput');
const logoInput = document.getElementById('logoInput');
const descInput = document.getElementById('descInput');
const typeSelect = document.getElementById('typeSelect');
const priceInput = document.getElementById('priceInput');
const marketingInput = document.getElementById('marketingInput');
const tutorial = document.getElementById('tutorial');

// Base participants selon le type
const baseParticipants = {
  concert: 200,
  conference: 120,
  exposition: 150,
  fete: 180
};

function startGame() {
  tutorial.style.display = "none";
  updatePreview();
}

function updatePreview() {
  const name = nameInput.value.trim() || "Nom de l'Ã©vÃ©nement";
  const desc = descInput.value.trim() || "Description de ton Ã©vÃ©nement";
  const type = typeSelect.value;
  const price = Math.max(1, parseFloat(priceInput.value) || 1);
  const marketing = Math.max(0, parseFloat(marketingInput.value) || 0);

  eventName.textContent = name;
  eventDescription.textContent = desc;

  // ---- CALCUL ----
  const base = baseParticipants[type];
  const attractivity = 1 + Math.min(desc.length / 100, 0.5) + Math.min(marketing / 500, 0.5);
  
  // Impact du prix : cher = moins de monde (non-linÃ©aire)
  const priceEffect = Math.max(0.1, 1.5 - price / 25);

  const participants = Math.floor(base * attractivity * priceEffect);
  const profit = Math.floor((participants * price) - (marketing + base * 2));

  participantsDisplay.textContent = participants.toLocaleString();
  profitDisplay.textContent = profit.toLocaleString() + " â‚¬";
}

// Logo upload
logoInput.addEventListener('change', e => {
  const file = e.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = evt => eventLogo.src = evt.target.result;
  reader.readAsDataURL(file);
});

// Update dynamique
[nameInput, descInput, typeSelect, priceInput, marketingInput].forEach(el =>
  el.addEventListener('input', updatePreview)
);
</script>

</body>
</html>
